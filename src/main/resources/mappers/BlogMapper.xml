<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace：命名空间，对应一个dao层接口的全路径 -->
<mapper namespace="com.xun.dao.BlogDao">

    <sql id="blogQuerry">
        <where>
            <if test="title != null and title !=''">
                title like concat("%", #{title}, "%")
            </if>
        </where>
    </sql>

    <select id="findBlogs" resultMap="findBlogAll">
        select * from blog
        <include refid="blogQuerry"></include>
    </select>

    <resultMap id="findBlogAll" type="com.xun.pojo.BlogUserTypeVo">
        <id property="id" column="id"/>
        <association property="user"
                     column="user_id"
                     select="com.xun.dao.UserDao.findUserById">
        </association>
        <association property="type"
                     column="type_id"
                     select="com.xun.dao.TypeDao.findTypeById">
        </association>
    </resultMap>
</mapper>